{% extends 'layout.html.twig' %}

{% block container_content %}
        <div class="hero-unit">
            <h2>Ouvrons les données : VG 2012 Open Data! <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://vg2012.saliou.name/" data-text="Classements et graphes du Vendée Globe 2012" data-via="kbsali" data-lang="fr" data-hashtags="VG2012">Tweeter</a></h2>
            <p>Je suis le <strong><a href="http://www.vendeeglobe.org/fr/">Vendée Globe</a></strong> de près, et surtout bien-sûr <strong>les classements</strong>! Mais malheureusement ces <a href="http://www.vendeeglobe.org/fr/classements.html">classements</a> sont plutôt légers et les <a href="http://www.vendeeglobe.org/fr/classement-historiques.html">version détaillés</a> sont au <strong>format fermé Excel</strong>, peu exploitable et donc pas très pratique à mon goût. De plus, j'aimerais par exemple avoir des <a href="{{ rndSail }}">graphes</a> sur l'évolution des positions de chaque marin, ou de sa vitesse; ou encore la distance qu'il y a entre le 1er et le dernier au cours du temps, etc... Pas possible sans avoir un accès facile à toutes ces données!</p>
            <p>J'ai donc implémenté une solution pour exporter toutes ces données au <strong>format <a href="http://www.json.org/">JSON</a></strong> afin de pouvoir les <strong>exploiter beaucoup plus facilement</strong>! Ceci pourrait permettre aux développeurs de proposer des <strong>tableaux, graphes et autres cartes</strong> pour visualiser et analyser de façon différente les données de classements de cette régate.</p>
            <p>
                <a href="/reports/latest" class="btn btn-success btn-large">Dernier classement</a>
                <a href="{{ rndSail }}" class="btn btn-success btn-large">Bateau au hasard</a>
                <button class="jsonformat btn btn-primary" data-toggle="modal">Sample JSON</button>
                <a href="/doc/json" class="jsondoc btn btn-primary" target="_blank">JSON Doc</a>
            </p>

        </div>
        <div id="ajax-modal" class="modal hide fade" tabindex="-1"></div>

        <!-- Example row of columns -->
        <div class="row-fluid">
            <div class="span4">
                <h2>Complet</h2>
                <p>Tous les pointages publiés pour tous les bateaux</p>
                <ul>
                    {% for file in lFull %}
                        <li><a href="{{ file }}">{{ file }}</a>
                    {% endfor %}
                </ul>
            </div>
            <div class="span4">
                <h2>Par voile</h2>
                <p>Tous les pointages publiés par bateau</p>
                <ul>
                    {% for file in lSail %}
                        <li>
                            <a target="_blank" href="'.$file.'" rel="tooltip" title="Accès JSON"><i class="icon-download"></i></a>
                            <a href="'.str_replace(array('/json', '.json'), '', $file).'" rel="tooltip" title="Voir les graphes"><i class="icon-signal"></i>asdfasdf</a>
                    {% endfor %}
                    {#
                    <?php foreach($this->lSail as $file) {
                        // /json/sail/ESP4.json
                        $s = '|/json/sail/(.*?).json|s';
                        preg_match($s, $file, $m);
                        echo '<li>';
                        echo '<a target="_blank" href="'.$file.'" rel="tooltip" title="Accès JSON"><i class="icon-download"></i></a> ';
                        echo '<a href="'.str_replace(array('/json', '.json'), '', $file).'" rel="tooltip" title="Voir les graphes"><i class="icon-signal"></i>';
                        echo $m[1].' - '.$this->firstReport[$m[1]]['skipper'].'</a>';
                    } ?>
                    #}
                </ul>
            </div>
            <div class="span4">
                <h2>Par classement</h2>
                <p>Tous les classements publiés</p>
                <ul>
                    {% for file in lReport %}
                        <li>
                            <a target="_blank" href="'.$file.'" rel="tooltip" title="Accès JSON"><i class="icon-download"></i></a>
                            <a href="'.str_replace(array('/json', '.json'), '', $file).'" rel="tooltip" title="Voir les graphes"><i class="icon-signal"></i>asdfasdf</a>
                    {% endfor %}
                    {#
                    <?php foreach($this->lReport as $file) {
                        $s = '|/json/reports/(\d{4})(\d{2})(\d{2})-(\d{2})(\d{2}).json|s';
                        preg_match($s, $file, $m);
                        list($bla, $y, $mo, $d, $h, $min) = $m;
                        echo '<li>';
                        echo '<a target="_blank" href="'.$file.'" rel="tooltip" title="Accès JSON"><i class="icon-download"></i></a> ';
                        echo '<a href="'.str_replace(array('/json', '.json'), '', $file).'" rel="tooltip" title="Voir le classement"><i class="icon-th-list"></i>';
                        echo $y.'-'.$mo.'-'.$d.' '.$h.':'.$min.'</a>';
                    } ?>
                    #}
                </ul>
            </div>
        </div>
{% endblock %}
